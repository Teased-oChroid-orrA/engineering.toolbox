# STB-011: Extract state/history controller

- Epic: Refactor
- Estimate: 5 points
- Dependencies: STB-010

## Scope
Implement Extract state/history controller aligned to Plan v3 gates and anti-bloat rules.

## Acceptance Criteria
- Architecture manifest contract is respected (`src/lib/surface/SurfaceArchitectureManifest.ts`).
- Core Mode / anti-bloat policy is not regressed.
- Behavior is covered by checks/tests appropriate to this ticket.
- Related docs/scripts are updated when behavior contracts change.

## Test Checklist
- Unit tests (where applicable) pass.
- Contract checks pass.
- Build and type checks pass.
- Manual validation for UX behavior (if UI-affecting).

## Notes
- Keep module sizes within agreed limits.
- Avoid introducing top-level UI clutter; prefer progressive disclosure.
