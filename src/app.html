<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width" />
    %sveltekit.head%
    
    <script>
      // DEV ONLY â€” ResizeObserver provenance logger
      (() => {
        const isDev =
          location.hostname === "localhost" ||
          location.hostname === "127.0.0.1" ||
          location.hostname === "[::1]" ||
          location.port === "5173" ||
          location.port === "4173" ||
          new URLSearchParams(location.search).get("rotrace") === "1";

        if (!isDev) return;

        const RO = window.ResizeObserver;
        if (!RO || RO.__patched) return;

        const origObserve = RO.prototype.observe;
        const origUnobserve = RO.prototype.unobserve;

        RO.prototype.observe = function (target, options) {
          const stack = new Error("ResizeObserver.observe called here").stack;
          try {
            if (target && typeof target === "object") {
              target.__roStack = stack;
              target.__roTag = (target.tagName || "").toLowerCase();
              target.__roClass = target.className || "";
            }
          } catch {}

          if (target && typeof target === "object" && !target.__roLogged) {
            target.__roLogged = true;
            console.groupCollapsed("[RO] observe", target);
            console.log("tag:", target.__roTag, "class:", target.__roClass);
            console.log(stack);
            console.groupEnd();
          }
          return origObserve.call(this, target, options);
        };

        RO.prototype.unobserve = function (target) {
          return origUnobserve.call(this, target);
        };

        RO.__patched = true;
        console.log("[RO] ResizeObserver.observe patched (dev)");
      })();
    </script>
<style>
      body { background-color: #020617; margin: 0; }
      #splash {
        position: fixed; inset: 0; z-index: 9999;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        background: radial-gradient(circle at 50% 120%, rgba(99, 102, 241, 0.15), rgba(2, 6, 23, 1));
        transition: opacity 0.5s ease-out;
        pointer-events: none;
      }
      .spinner {
        width: 40px; height: 40px;
        border: 3px solid rgba(255,255,255,0.1);
        border-top-color: #6366f1; /* Indigo */
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
      body:not(:empty) #splash { display: none; } 
    </style>
  </head>
  <body data-sveltekit-preload-data="hover" class="bg-zinc-950 text-white antialiased selection:bg-indigo-500/30">
    <div id="splash">
      <div class="spinner"></div>
      <div style="margin-top: 1rem; font-family: sans-serif; font-size: 0.75rem; color: rgba(255,255,255,0.4); letter-spacing: 0.1em;">
        INITIALIZING KERNEL
      </div>
    </div>
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>