@import "tailwindcss";
@plugin "@tailwindcss/forms";

/* 1. THEME CONFIGURATION (Replaces tailwind.config.cjs) */
@theme {
  /* Define colors directly. Tailwind v4 automatically creates 
     bg-primary-500, text-primary-500, etc. from these. */
  
  --color-primary-500: rgb(99 102 241); /* Indigo-500 */
  --color-primary-600: rgb(79 70 229);  /* Indigo-600 */
  
  --color-secondary-500: rgb(14 165 233); /* Sky-500 */

  --color-success-500: rgb(16 185 129);
  --color-error-500: rgb(239 68 68);

  /* Surface Scale (Slate-ish Blue-Black) */
  --color-surface-50: rgb(248 250 252);
  --color-surface-100: rgb(241 245 249);
  --color-surface-200: rgb(226 232 240);
  --color-surface-300: rgb(203 213 225);
  --color-surface-400: rgb(148 163 184);
  --color-surface-500: rgb(100 116 139);
  --color-surface-600: rgb(71 85 105);
  --color-surface-700: rgb(51 65 85);
  --color-surface-800: rgb(30 41 59);
  --color-surface-900: rgb(15 23 42);
  --color-surface-950: rgb(2 6 23);

  /* Animations */
  --animate-spin-slow: spin 3s linear infinite;
}

/* 2. GLOBAL STYLES */
:root {
  color-scheme: dark;
  --surface-font-display: "Sora", "Avenir Next", "Segoe UI", "Helvetica Neue", sans-serif;
  --surface-font-data: "IBM Plex Mono", "SF Mono", "Roboto Mono", "Menlo", monospace;
  --surface-motion-fast: 180ms;
  --surface-motion-standard: 220ms;
  --surface-motion-deliberate: 300ms;
  --surface-motion-ease: cubic-bezier(0.22, 0.61, 0.36, 1);
  --bushing-motion-fast: 180ms;
  --bushing-motion-standard: 220ms;
  --bushing-motion-deliberate: 300ms;
  --bushing-motion-ease: cubic-bezier(0.22, 0.61, 0.36, 1);

  --surface-lab-bg-0: #07111b;
  --surface-lab-bg-1: #0d1d2d;
  --surface-lab-panel: rgba(10, 22, 34, 0.72);
  --surface-lab-panel-border: rgba(124, 170, 208, 0.26);
  --surface-lab-accent: #38bdf8;
  --surface-lab-accent-strong: #0ea5e9;
  --surface-lab-metric: #7dd3fc;
}

body {
  /* Deep Slate Base */
  background-color: var(--color-surface-950);
  color: white;
  
  /* Neon Horizon Glows */
  background-image: 
    radial-gradient(circle at 0% 0%, rgba(14, 165, 233, 0.15) 0%, transparent 40%),
    radial-gradient(circle at 100% 100%, rgba(99, 102, 241, 0.15) 0%, transparent 40%);
  background-attachment: fixed;
}

/* 3. GLASS UTILITIES */
@layer utilities {
  .glass-panel {
    @apply bg-surface-900/60 backdrop-blur-xl border border-white/15 shadow-2xl shadow-black/50;
  }
  
  .glass-card {
    /* Base State */
    @apply bg-white/5 backdrop-blur-md border border-white/10 shadow-lg transition-all duration-300;
  }
  
  /* Hover State separated for v4 stability */
  .glass-card:hover {
    @apply bg-white/10 border-white/20 shadow-[0_0_20px_rgba(99,102,241,0.15)];
  }

  .glass-input {
    @apply bg-black/20 border border-white/15 text-white placeholder:text-white/30 rounded-md transition-all;
  }
  
  .glass-input:focus {
    @apply border-secondary-500/50 outline-none ring-1 ring-secondary-500/50;
  }

  .surface-lab {
    font-family: var(--surface-font-display);
    background:
      radial-gradient(circle at 9% 10%, rgba(56, 189, 248, 0.14), transparent 32%),
      radial-gradient(circle at 91% 6%, rgba(14, 165, 233, 0.13), transparent 31%),
      linear-gradient(160deg, var(--surface-lab-bg-0), var(--surface-lab-bg-1));
    border: 1px solid rgba(148, 163, 184, 0.16);
    border-radius: 18px;
    padding: 0.9rem;
    box-shadow: inset 0 1px 0 rgba(186, 230, 253, 0.06), 0 20px 48px rgba(2, 8, 18, 0.6);
  }

  .surface-lab .font-mono,
  .surface-lab code,
  .surface-lab pre,
  .surface-lab svg text {
    font-family: var(--surface-font-data);
  }

  .surface-tech-card {
    background: var(--surface-lab-panel);
    border: 1px solid var(--surface-lab-panel-border);
    box-shadow: 0 10px 28px rgba(5, 10, 18, 0.38);
  }

  .surface-reveal {
    animation: surface-reveal var(--surface-motion-deliberate) var(--surface-motion-ease) both;
  }

  .surface-stagger-1 { animation-delay: 40ms; }
  .surface-stagger-2 { animation-delay: 80ms; }
  .surface-stagger-3 { animation-delay: 120ms; }

  .surface-panel-slide {
    transition:
      transform var(--surface-motion-standard) var(--surface-motion-ease),
      opacity var(--surface-motion-standard) var(--surface-motion-ease),
      border-color var(--surface-motion-fast) var(--surface-motion-ease),
      box-shadow var(--surface-motion-fast) var(--surface-motion-ease);
  }

  .surface-panel-slide:hover {
    transform: translateY(-2px);
    border-color: rgba(125, 211, 252, 0.46);
    box-shadow: 0 16px 32px rgba(3, 12, 23, 0.5);
  }

  .surface-pop-card {
    --surface-tilt-x: 2deg;
    --surface-tilt-y: -2.2deg;
    --surface-lift-y: -4px;
    position: relative;
    transform-style: preserve-3d;
    transition:
      transform var(--surface-motion-standard) var(--surface-motion-ease),
      border-color var(--surface-motion-fast) var(--surface-motion-ease),
      box-shadow var(--surface-motion-fast) var(--surface-motion-ease),
      background-color var(--surface-motion-fast) var(--surface-motion-ease);
  }

  .surface-pop-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity var(--surface-motion-fast) var(--surface-motion-ease);
    background:
      radial-gradient(circle at 18% 12%, rgba(125, 211, 252, 0.2), transparent 50%),
      radial-gradient(circle at 88% 88%, rgba(14, 165, 233, 0.14), transparent 45%);
  }

  .surface-pop-card:hover {
    transform: perspective(960px) translateY(var(--surface-lift-y, -4px)) rotateX(var(--surface-tilt-x, 2deg)) rotateY(var(--surface-tilt-y, -2.2deg));
    border-color: rgba(125, 211, 252, 0.5);
    box-shadow: 0 20px 36px rgba(3, 12, 23, 0.56), 0 0 0 1px rgba(125, 211, 252, 0.18) inset;
  }

  .surface-pop-card:hover::before {
    opacity: 1;
  }

  .surface-accent-rule {
    position: relative;
  }

  .surface-accent-rule::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: -0.35rem;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--surface-lab-accent), transparent);
    opacity: 0.85;
  }

  .bushing-pop-card {
    --bushing-tilt-x: 2.2deg;
    --bushing-tilt-y: -2deg;
    --bushing-lift-y: -6px;
    position: relative;
    transform-style: preserve-3d;
    transform-origin: center center;
    transition:
      transform var(--bushing-motion-standard) var(--bushing-motion-ease),
      border-color var(--bushing-motion-fast) var(--bushing-motion-ease),
      box-shadow var(--bushing-motion-fast) var(--bushing-motion-ease),
      background-color var(--bushing-motion-fast) var(--bushing-motion-ease);
  }

  .bushing-pop-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity var(--bushing-motion-fast) var(--bushing-motion-ease);
    background:
      radial-gradient(circle at 14% 12%, rgba(45, 212, 191, 0.16), transparent 44%),
      radial-gradient(circle at 86% 88%, rgba(20, 184, 166, 0.12), transparent 48%);
  }

  .bushing-pop-card:hover {
    transform: perspective(980px) translateY(var(--bushing-lift-y, -6px)) rotateX(var(--bushing-tilt-x, 2.2deg)) rotateY(var(--bushing-tilt-y, -2deg));
    border-color: rgba(45, 212, 191, 0.46);
    box-shadow:
      0 22px 36px rgba(2, 8, 18, 0.58),
      0 0 0 1px rgba(94, 234, 212, 0.2) inset,
      0 0 18px rgba(45, 212, 191, 0.16);
  }

  .bushing-pop-card:hover::before {
    opacity: 1;
  }

  .bushing-no-tilt:hover {
    transform: none;
  }

  .bushing-pop-sub {
    --bushing-sub-tilt-x: 0.35deg;
    --bushing-sub-tilt-y: -0.25deg;
    --bushing-sub-lift-y: -1.5px;
    transition:
      transform var(--bushing-motion-standard) var(--bushing-motion-ease),
      border-color var(--bushing-motion-fast) var(--bushing-motion-ease),
      box-shadow var(--bushing-motion-fast) var(--bushing-motion-ease),
      background-color var(--bushing-motion-fast) var(--bushing-motion-ease);
  }

  .bushing-pop-sub:hover {
    transform: perspective(900px) translateY(var(--bushing-sub-lift-y, -1.5px)) rotateX(var(--bushing-sub-tilt-x, 0.35deg)) rotateY(var(--bushing-sub-tilt-y, -0.25deg));
    border-color: rgba(45, 212, 191, 0.4);
    box-shadow:
      0 10px 16px rgba(2, 8, 18, 0.42),
      0 0 0 1px rgba(94, 234, 212, 0.16) inset;
  }

  .bushing-depth-0 {
    --bushing-tilt-x: 0deg;
    --bushing-tilt-y: 0deg;
    --bushing-lift-y: -1px;
  }

  .bushing-depth-1 {
    --bushing-tilt-x: 0.75deg;
    --bushing-tilt-y: -0.65deg;
    --bushing-lift-y: -3px;
  }

  .bushing-depth-2 {
    --bushing-tilt-x: 2.2deg;
    --bushing-tilt-y: -2deg;
    --bushing-lift-y: -6px;
  }

  .bush-card-title {
    color: rgba(199, 210, 254, 0.92);
    letter-spacing: 0.04em;
    text-transform: uppercase;
    font-weight: 700;
  }

  .bush-card-label {
    color: rgba(226, 232, 240, 0.88);
    font-weight: 500;
  }

  .bush-card-value {
    color: rgba(241, 245, 249, 0.96);
    font-weight: 600;
  }

  .bush-card-value-accent {
    color: rgba(110, 231, 183, 0.96);
    font-weight: 700;
  }

  .bush-card-value-warning {
    color: rgba(253, 230, 138, 0.98);
    font-weight: 700;
  }

  .bush-card-muted {
    color: rgba(148, 163, 184, 0.9);
  }

  .bushing-results-card {
    background: linear-gradient(165deg, rgba(15, 23, 42, 0.85), rgba(19, 29, 55, 0.82));
    border: 1px solid rgba(148, 163, 184, 0.26);
    color: rgba(241, 245, 249, 0.96);
  }

  .inspector-lab {
    background:
      radial-gradient(circle at 6% 12%, rgba(16, 185, 129, 0.12), transparent 34%),
      radial-gradient(circle at 92% 10%, rgba(56, 189, 248, 0.12), transparent 36%),
      linear-gradient(165deg, rgba(7, 13, 24, 0.94), rgba(10, 18, 31, 0.94));
    border: 1px solid rgba(134, 239, 172, 0.14);
    border-radius: 16px;
    padding: 0.55rem;
    box-shadow: inset 0 1px 0 rgba(167, 243, 208, 0.06), 0 22px 52px rgba(2, 8, 18, 0.58);
  }

  .inspector-reveal {
    animation: inspector-reveal 320ms cubic-bezier(0.2, 0.7, 0.2, 1) both;
  }

  .inspector-panel-slide {
    transition:
      transform 220ms cubic-bezier(0.22, 0.61, 0.36, 1),
      border-color 180ms cubic-bezier(0.22, 0.61, 0.36, 1),
      box-shadow 180ms cubic-bezier(0.22, 0.61, 0.36, 1);
  }

  .inspector-depth-0 {
    --ins-tilt-x: 0deg;
    --ins-tilt-y: 0deg;
    --ins-lift-y: -1px;
  }

  .inspector-depth-1 {
    --ins-tilt-x: 0.45deg;
    --ins-tilt-y: -0.35deg;
    --ins-lift-y: -2px;
  }

  .inspector-depth-2 {
    --ins-tilt-x: 2.7deg;
    --ins-tilt-y: -2.4deg;
    --ins-lift-y: -7px;
  }

  .inspector-pop-card {
    position: relative;
    transform-style: preserve-3d;
  }

  .inspector-pop-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity 180ms cubic-bezier(0.22, 0.61, 0.36, 1);
    background:
      radial-gradient(circle at 14% 14%, rgba(134, 239, 172, 0.16), transparent 45%),
      radial-gradient(circle at 86% 90%, rgba(56, 189, 248, 0.14), transparent 46%);
  }

  .inspector-pop-card:hover {
    transform: perspective(1020px) translateY(var(--ins-lift-y, -7px)) rotateX(var(--ins-tilt-x, 2.7deg)) rotateY(var(--ins-tilt-y, -2.4deg));
    border-color: rgba(110, 231, 183, 0.55);
    box-shadow:
      0 24px 40px rgba(2, 8, 18, 0.6),
      0 0 0 1px rgba(167, 243, 208, 0.24) inset,
      0 0 26px rgba(56, 189, 248, 0.2);
  }

  .inspector-pop-card:hover::before {
    opacity: 1;
  }

  .inspector-pop-sub {
    --ins-tilt-x: 0.3deg;
    --ins-tilt-y: -0.2deg;
    --ins-lift-y: -1.5px;
    transition:
      transform 200ms cubic-bezier(0.22, 0.61, 0.36, 1),
      border-color 180ms cubic-bezier(0.22, 0.61, 0.36, 1),
      box-shadow 180ms cubic-bezier(0.22, 0.61, 0.36, 1);
  }

  .inspector-pop-sub:hover {
    transform: perspective(900px) translateY(var(--ins-lift-y, -1.5px)) rotateX(var(--ins-tilt-x, 0.3deg)) rotateY(var(--ins-tilt-y, -0.2deg));
    border-color: rgba(125, 211, 252, 0.5);
    box-shadow: 0 10px 18px rgba(2, 8, 18, 0.42), 0 0 0 1px rgba(125, 211, 252, 0.16) inset;
  }

  .inspector-pop-layer {
    position: relative;
    transform-style: preserve-3d;
    transition:
      transform 210ms cubic-bezier(0.22, 0.61, 0.36, 1),
      border-color 180ms cubic-bezier(0.22, 0.61, 0.36, 1),
      box-shadow 180ms cubic-bezier(0.22, 0.61, 0.36, 1),
      background-color 180ms cubic-bezier(0.22, 0.61, 0.36, 1);
  }

  .inspector-pop-layer::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity 180ms cubic-bezier(0.22, 0.61, 0.36, 1);
    background:
      radial-gradient(circle at 18% 16%, rgba(134, 239, 172, 0.12), transparent 48%),
      radial-gradient(circle at 84% 86%, rgba(56, 189, 248, 0.1), transparent 46%);
  }

  .inspector-pop-layer:hover {
    transform: perspective(960px) translateY(-4px) rotateX(1.15deg) rotateY(-0.9deg);
    border-color: rgba(125, 211, 252, 0.58);
    box-shadow: 0 16px 24px rgba(2, 8, 18, 0.5), 0 0 0 1px rgba(167, 243, 208, 0.18) inset, 0 0 16px rgba(56, 189, 248, 0.14);
  }

  .inspector-pop-layer:hover::after {
    opacity: 1;
  }

  .inspector-pop-value {
    display: inline-block;
    max-width: 100%;
    border-radius: 9px;
    padding: 0.08rem 0.32rem;
    transform-style: preserve-3d;
    transition:
      transform 180ms cubic-bezier(0.22, 0.61, 0.36, 1),
      background-color 150ms cubic-bezier(0.22, 0.61, 0.36, 1),
      box-shadow 180ms cubic-bezier(0.22, 0.61, 0.36, 1),
      color 140ms cubic-bezier(0.22, 0.61, 0.36, 1);
    will-change: transform;
  }

  @media (hover: hover) and (pointer: fine) {
    .inspector-pop-value:hover {
      transform: perspective(820px) translateY(-4px) rotateX(1.8deg) rotateY(-1.2deg);
      background: linear-gradient(160deg, rgba(110, 231, 183, 0.18), rgba(56, 189, 248, 0.14));
      box-shadow:
        0 12px 20px rgba(2, 8, 18, 0.5),
        0 0 0 1px rgba(167, 243, 208, 0.28) inset,
        0 0 14px rgba(56, 189, 248, 0.2);
    }
  }

  .ins-query-hit {
    display: inline-block;
    border-radius: 9px;
    padding: 0.06rem 0.34rem;
    color: rgba(236, 253, 245, 0.98);
    background: linear-gradient(150deg, rgba(16, 185, 129, 0.28), rgba(56, 189, 248, 0.2));
    border: 1px solid rgba(110, 231, 183, 0.5);
    box-shadow:
      0 7px 14px rgba(2, 8, 18, 0.42),
      0 0 0 1px rgba(167, 243, 208, 0.18) inset,
      0 0 12px rgba(56, 189, 248, 0.16);
    transform: perspective(700px) translateY(-1px);
  }

  .ins-query-hit:hover {
    transform: perspective(820px) translateY(-4px) rotateX(1.5deg) rotateY(-1deg);
    box-shadow:
      0 13px 22px rgba(2, 8, 18, 0.56),
      0 0 0 1px rgba(167, 243, 208, 0.34) inset,
      0 0 18px rgba(56, 189, 248, 0.24);
  }

  @media (prefers-reduced-motion: reduce) {
    .bushing-pop-card,
    .bushing-pop-sub,
    .inspector-pop-layer,
    .inspector-pop-value {
      transition: none;
      transform: none;
    }
    .bushing-pop-card:hover,
    .bushing-pop-sub:hover,
    .inspector-pop-layer:hover,
    .inspector-pop-value:hover {
      transform: none;
    }
  }
}
/* Engineering suite utilities */
:root {
  --color-eng-tension: 255 191 0;
  --color-eng-critical: 239 68 68;
}

@layer utilities {
  .constraint-tensed { stroke: rgb(var(--color-eng-tension)); filter: drop-shadow(0 0 3px gold); }
  .buckling-fail { @apply border-error-500 bg-error-500/10 shadow-lg animate-pulse; }
}

@keyframes surface-reveal {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.995);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes inspector-reveal {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.996);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
  .surface-depth-0 {
    --surface-tilt-x: 0deg;
    --surface-tilt-y: 0deg;
    --surface-lift-y: -1px;
  }

  .surface-depth-1 {
    --surface-tilt-x: 0.6deg;
    --surface-tilt-y: -0.55deg;
    --surface-lift-y: -2px;
  }

  .surface-depth-2 {
    --surface-tilt-x: 2deg;
    --surface-tilt-y: -2.2deg;
    --surface-lift-y: -4px;
  }
